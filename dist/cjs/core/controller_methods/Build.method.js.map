{"version":3,"file":"Build.method.js","sources":["../../../../src/core/controller_methods/Build.method.js"],"sourcesContent":["const createBuild = (ctx, ctrl) => {\r\n    const { path, method, handler } = ctrl\r\n\r\n    return () => {\r\n        const pathRegexp = /\\{([^}]+)\\}/g\r\n        const output = []\r\n\r\n        if(ctx.endpoints.length === 0) {\r\n            output.push({ path, method, exceptions: ctx.exceptions, options: ctx.options, handler })\r\n        } else {\r\n            for(const endpoint of ctx.endpoints) {\r\n                output.push({\r\n                    path: path + endpoint.path,\r\n                    method: endpoint.method,\r\n                    exceptions: ctx.exceptions,\r\n                    options: ctx.options,\r\n                    prehandler: handler,\r\n                    handler: endpoint.handler\r\n                })\r\n            }\r\n        }\r\n\r\n        for(const item of output) {\r\n            if(!pathRegexp.test(item.path)) continue\r\n\r\n            item.matcher = (path) => {\r\n                const regexPattern = item.path.replace(/{(\\w+)}/g, (_, name) => `(?<${name}>[^/]+)`)\r\n                const regex = new RegExp(`^${regexPattern}$`)\r\n\r\n                const result = path.match(regex)\r\n                return result ? result.groups : null\r\n            }\r\n        }\r\n\r\n        return output\r\n    }\r\n}\r\n\r\nexport default createBuild"],"names":[],"mappings":";;AAAK,MAAC,WAAW,GAAG,CAAC,GAAG,EAAE,IAAI,KAAK;AACnC,IAAI,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,GAAG,KAAI;AAC1C;AACA,IAAI,OAAO,MAAM;AACjB,QAAQ,MAAM,UAAU,GAAG,eAAc;AACzC,QAAQ,MAAM,MAAM,GAAG,GAAE;AACzB;AACA,QAAQ,GAAG,GAAG,CAAC,SAAS,CAAC,MAAM,KAAK,CAAC,EAAE;AACvC,YAAY,MAAM,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,UAAU,EAAE,GAAG,CAAC,UAAU,EAAE,OAAO,EAAE,GAAG,CAAC,OAAO,EAAE,OAAO,EAAE,EAAC;AACpG,SAAS,MAAM;AACf,YAAY,IAAI,MAAM,QAAQ,IAAI,GAAG,CAAC,SAAS,EAAE;AACjD,gBAAgB,MAAM,CAAC,IAAI,CAAC;AAC5B,oBAAoB,IAAI,EAAE,IAAI,GAAG,QAAQ,CAAC,IAAI;AAC9C,oBAAoB,MAAM,EAAE,QAAQ,CAAC,MAAM;AAC3C,oBAAoB,UAAU,EAAE,GAAG,CAAC,UAAU;AAC9C,oBAAoB,OAAO,EAAE,GAAG,CAAC,OAAO;AACxC,oBAAoB,UAAU,EAAE,OAAO;AACvC,oBAAoB,OAAO,EAAE,QAAQ,CAAC,OAAO;AAC7C,iBAAiB,EAAC;AAClB,aAAa;AACb,SAAS;AACT;AACA,QAAQ,IAAI,MAAM,IAAI,IAAI,MAAM,EAAE;AAClC,YAAY,GAAG,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,QAAQ;AACpD;AACA,YAAY,IAAI,CAAC,OAAO,GAAG,CAAC,IAAI,KAAK;AACrC,gBAAgB,MAAM,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE,CAAC,CAAC,EAAE,IAAI,KAAK,CAAC,GAAG,EAAE,IAAI,CAAC,OAAO,CAAC,EAAC;AACpG,gBAAgB,MAAM,KAAK,GAAG,IAAI,MAAM,CAAC,CAAC,CAAC,EAAE,YAAY,CAAC,CAAC,CAAC,EAAC;AAC7D;AACA,gBAAgB,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,EAAC;AAChD,gBAAgB,OAAO,MAAM,GAAG,MAAM,CAAC,MAAM,GAAG,IAAI;AACpD,cAAa;AACb,SAAS;AACT;AACA,QAAQ,OAAO,MAAM;AACrB,KAAK;AACL;;;;"}