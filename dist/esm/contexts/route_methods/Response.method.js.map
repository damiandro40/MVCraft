{"version":3,"file":"Response.method.js","sources":["../../../../src/contexts/route_methods/Response.method.js"],"sourcesContent":["import kleur from \"kleur\"\r\nimport Logger from \"../../helpers/Logger.js\"\r\n\r\nconst createResponse = (req, res, locals) => {\r\n    return (data) => {\r\n        if(locals.handled === true || locals.aborted === true) return\r\n\r\n        if(data === null || data === undefined || data === '') data = 'no content'\r\n\r\n        const contentType = res.getHeader('content-type')\r\n        if(!contentType) {\r\n            if(Buffer.isBuffer(data)) {\r\n                res.setHeader('Content-Type', 'application/octet-stream')\r\n                Logger(`Missing \"${kleur.blue().bold('Content-Type')}\" header. Added \"${kleur.blue().bold('application/octet-stream')}\" automatically.`, 'controller')\r\n            } else if(typeof data !== 'string') {\r\n                Logger(`Missing \"${kleur.blue().bold('Content-Type')}\" header. Added \"${kleur.blue().bold('application/json')}\" automatically.`, 'controller')\r\n                res.setHeader('Content-Type', 'application/json')\r\n            } else {\r\n                Logger(`Missing \"${kleur.blue().bold('Content-Type')}\" header. Added \"${kleur.blue().bold('text/plain')}\" automatically.`, 'controller')\r\n                res.setHeader('Content-Type', 'text/plain')\r\n            }\r\n        }\r\n\r\n        if(!Buffer.isBuffer(data) && typeof data !== 'string' && res.getHeader('content-type') === 'application/json') {\r\n            data = JSON.stringify(data)\r\n        }\r\n\r\n        res.end(data)\r\n        \r\n        locals.handled = true\r\n    }\r\n}\r\n\r\nexport default createResponse"],"names":["kleur"],"mappings":";;;AAGK,MAAC,cAAc,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,MAAM,KAAK;AAC7C,IAAI,OAAO,CAAC,IAAI,KAAK;AACrB,QAAQ,GAAG,MAAM,CAAC,OAAO,KAAK,IAAI,IAAI,MAAM,CAAC,OAAO,KAAK,IAAI,EAAE,MAAM;AACrE;AACA,QAAQ,GAAG,IAAI,KAAK,IAAI,IAAI,IAAI,KAAK,SAAS,IAAI,IAAI,KAAK,EAAE,EAAE,IAAI,GAAG,aAAY;AAClF;AACA,QAAQ,MAAM,WAAW,GAAG,GAAG,CAAC,SAAS,CAAC,cAAc,EAAC;AACzD,QAAQ,GAAG,CAAC,WAAW,EAAE;AACzB,YAAY,GAAG,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;AACtC,gBAAgB,GAAG,CAAC,SAAS,CAAC,cAAc,EAAE,0BAA0B,EAAC;AACzE,gBAAgB,MAAM,CAAC,CAAC,SAAS,EAAEA,CAAK,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,iBAAiB,EAAEA,CAAK,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,0BAA0B,CAAC,CAAC,gBAAgB,CAAC,EAAE,YAAY,EAAC;AACtK,aAAa,MAAM,GAAG,OAAO,IAAI,KAAK,QAAQ,EAAE;AAChD,gBAAgB,MAAM,CAAC,CAAC,SAAS,EAAEA,CAAK,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,iBAAiB,EAAEA,CAAK,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,gBAAgB,CAAC,EAAE,YAAY,EAAC;AAC9J,gBAAgB,GAAG,CAAC,SAAS,CAAC,cAAc,EAAE,kBAAkB,EAAC;AACjE,aAAa,MAAM;AACnB,gBAAgB,MAAM,CAAC,CAAC,SAAS,EAAEA,CAAK,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,iBAAiB,EAAEA,CAAK,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,gBAAgB,CAAC,EAAE,YAAY,EAAC;AACxJ,gBAAgB,GAAG,CAAC,SAAS,CAAC,cAAc,EAAE,YAAY,EAAC;AAC3D,aAAa;AACb,SAAS;AACT;AACA,QAAQ,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,OAAO,IAAI,KAAK,QAAQ,IAAI,GAAG,CAAC,SAAS,CAAC,cAAc,CAAC,KAAK,kBAAkB,EAAE;AACvH,YAAY,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,EAAC;AACvC,SAAS;AACT;AACA,QAAQ,GAAG,CAAC,GAAG,CAAC,IAAI,EAAC;AACrB;AACA,QAAQ,MAAM,CAAC,OAAO,GAAG,KAAI;AAC7B,KAAK;AACL;;;;"}